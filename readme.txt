■概要
ASC16風のメガROMです。
ASC16風であって、ASC16ではないので、ASC16タイプの市販ゲームソフトを書き込んでも、
多くの場合、正常に動作しませんのでご注意下さい。
あくまで、自作ソフトを動かすためのメガROMコントローラーで、
安価に汎用部品で作りたい人向けです。

■免責事項
無保証です。
本情報に基づいた制作物に関して、何らかの不具合・不利益を被ったとしても、当方(HRA!/t.hara)は一切責任を負いません。
同意できる場合に限り、複製、改造等の派生、製造、配布、販売は自由に行って頂いて構いません。
動作確認などは各自で行った上で、各自の責任の下で配布・販売を行ってください。

■仕様
4000-7FFF が BANK0, 8000-BFFF が BANK1 になります。
BANK0への書き込みは、BANK1のバンクレジスタへの書き込みになります。
BANK1への書き込みは、BANK1のバンクレジスタの示すアドレスのROMへの書き込みになります。
BANK0の読み出しは、ROMのBANK#0の読み出しになります。
BANK1の読み出しは、BANK1のバンクレジスタの示すアドレスのROMの読み出しになります。
ROMのバンクは、BANK#0〜#31 の 32通り。1バンク16KB になります。512KB の ROM の先頭から 16KBずつ区切り、
それを先頭から BANK#0, BANK#1, ... , BANK#31 と割り当てた番号になります。

C000-FFFF は BANK1のバンクレジスタのミラーになってます。ここに書き込んでもバンクが切り替わります。
といっても、通常、page3 は別スロットにある RAM を選択していると思いますので、ここへ書き込む使い方は
あまりオススメしません。

■ASC16との違い
(1) ASC16 は、BANK0 のバンクを切り替えることが出来ますが、本カートリッジでは BANK0 は BANK#0 固定です。
(2) ASC16 は、BANK1 のバンクはリセット時に BANK#0 に初期化されますが、初期バンク番号は本カートリッジでは不定です。
    必ずバンク番号を初期化してからアクセスしてください。
(3) ASC16 の BANK1 のバンクレジスタは 7000-77FF に存在しますが、本カートリッジでは 4000-7FFF が全てバンクレジスタです。

■コンセプト
4000-7FFF がバンクレジスタになっていますが、7000-77FF の範囲を使っていただくと、
OpenMSX等のエミュレーターを使って開発する際に、ASC16として設定すれば期待通り動作
するので、ASC16 に寄せた作りにしています。
それでいて、追加 IC は、汎用IC 2個だけで済ませました。
少ない汎用ICで、開発ツール類をそのまま利用できるメガROM、
というのがコンセプトになっております。

■基板の製造
(1) https://jlcpcb.com/ を webブラウザで開きます。
(2) 下記ファイルを Add Garber File にドラッグ＆ドロップします。
  /pcb/simple_megarom_cartridge/simple_megarom_cartridge.zip
(3) あとはサイトの指示に従って購入手続きを行うだけです。

基板の厚みは、デフォルトの 1.6mm にしてください。
カートリッジのカードエッジコネクタ部分は、基板の角をヤスリなどで斜めにカットすると MSX に挿入しやすくなります。
カートリッジは、部品面が前面です(MSXに装着したときに見える面)。
コナミタイプのカートリッジシェルに合わせた穴を開けてあります。
ICソケットを使うと、カートリッジシェルには収まらないのでご注意ください。

■書き込み
writer の中にある SMEGAWRT.COM を使うことで書き込むことが出来ます。
MSX-DOS上で、
  >SMEGAWRT TARGET.ROM
を実行すると、TARGET.ROM を書き込みます。

カートリッジ上のスイッチを切り替えることで、ROMを切り離すことが出来ます。
一度書き込んだあとに、別の内容に書き換える場合は、起動時に切り離しておいて、
MSX-DOSが起動してからスイッチを接続状態へ戻すことで書き替えることが出来ます。
切替スイッチが必要ない場合は、スイッチの接続用スルーホールの上2つをショートさせれば、常に接続状態になります。

-------------------------------------------------------------------------------
2024年6月 9日 初版 HRA!
2024年6月19日 追記 HRA!
